{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js"],"sourcesContent":["'use sctict';\nexport function searchPhotoByQuery(query) {\n  const URL = 'https://pixabay.com/api/';\n  const API_KEY = '45156529-f4caada2c6812495035285f69';\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  return fetch(`${URL}?${searchParams.toString()}`, {\n    headers: {\n      Accept: 'application/json',\n    },\n  }).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n// console.log(searchPhotoByQuery('yellow'));\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nconst form = document.querySelector('.js-form');\nconst picturesList = document.querySelector('.list');\nconst textDuringLoad = document.querySelector('.js-loading-text');\nimport { searchPhotoByQuery } from './pixabay-api.js';\nform.addEventListener('submit', searchQuery);\n//\nfunction searchQuery(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const inputValue = form.elements.request.value.trim().toLowerCase();\n  if (inputValue === '') {\n    return;\n  }\n  textDuringLoad.textContent = 'Loading images, please wait...';\n  searchPhotoByQuery(inputValue)\n    .then(data => {\n      if (data.hits.length === 0) {\n        throw new Error(response.status);\n      }\n      textDuringLoad.style.display = 'none';\n      markUpRequest(data.hits);\n    })\n    .catch(error => {\n      textDuringLoad.style.display = 'none';\n      catchError(error);\n    })\n    .finally(form.reset());\n}\n\nfunction markUpRequest(hits) {\n  picturesList.innerHTML = '';\n  const markUp = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class = \"list-item\">\n  <a href=\"${largeImageURL}\">\n    <div class = \"preview-photo\"><img src=\"${webformatURL}\" alt=\"${tags}\"></div>\n    <h2 >Likes</h2>\n    <p>${likes}</p>\n    <h2>Views</h2>\n    <p>${views}</p>\n    <h2>Comments</h2>\n    <p>${comments}</p>\n    <h2>Downloads</h2>\n    <p>${downloads}</p>\n  </a>\n\n</li>`;\n      }\n    )\n    .join('');\n  picturesList.innerHTML = markUp;\n}\nfunction catchError(error) {\n  return iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    color: 'red',\n    position: 'topRight',\n    closeOnClick: true,\n  });\n}\npicturesList.addEventListener('click', openModalWindow);\n\nfunction openModalWindow(event) {\n  event.preventDefault();\n  if (event.target === event.currentTarget) {\n    return;\n  }\n  const lightbox = new SimpleLightbox('.list  a', {\n    captionData: 'alt',\n  });\n}\n"],"names":["searchPhotoByQuery","query","URL","API_KEY","searchParams","response","form","picturesList","textDuringLoad","searchQuery","event","inputValue","data","markUpRequest","error","catchError","hits","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast","openModalWindow","SimpleLightbox"],"mappings":"6vBACO,SAASA,EAAmBC,EAAO,CACxC,MAAMC,EAAM,2BACNC,EAAU,qCACVC,EAAe,IAAI,gBAAgB,CACvC,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACD,OAAO,MAAM,GAAGC,CAAG,IAAIE,EAAa,SAAU,CAAA,GAAI,CAChD,QAAS,CACP,OAAQ,kBACT,CACL,CAAG,EAAE,KAAKC,GAAY,CAClB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CCjBA,MAAMC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAe,SAAS,cAAc,OAAO,EAC7CC,EAAiB,SAAS,cAAc,kBAAkB,EAEhEF,EAAK,iBAAiB,SAAUG,CAAW,EAE3C,SAASA,EAAYC,EAAO,CAC1BA,EAAM,eAAc,EACpB,MAAMJ,EAAOI,EAAM,cACbC,EAAaL,EAAK,SAAS,QAAQ,MAAM,KAAI,EAAG,cAClDK,IAAe,KAGnBH,EAAe,YAAc,iCAC7BR,EAAmBW,CAAU,EAC1B,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,SAAS,MAAM,EAEjCJ,EAAe,MAAM,QAAU,OAC/BK,EAAcD,EAAK,IAAI,CAC7B,CAAK,EACA,MAAME,GAAS,CACdN,EAAe,MAAM,QAAU,OAC/BO,EAAgB,CACtB,CAAK,EACA,QAAQT,EAAK,MAAK,CAAE,EACzB,CAEA,SAASO,EAAcG,EAAM,CAC3BT,EAAa,UAAY,GACzB,MAAMU,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,aACFL,CAAa;AAAA,6CACmBD,CAAY,UAAUE,CAAI;AAAA;AAAA,SAE9DC,CAAK;AAAA;AAAA,SAELC,CAAK;AAAA;AAAA,SAELC,CAAQ;AAAA;AAAA,SAERC,CAAS;AAAA;AAAA;AAAA,MAKb,EACA,KAAK,EAAE,EACVjB,EAAa,UAAYU,CAC3B,CACA,SAASF,EAAWD,EAAO,CACzB,OAAOW,EAAS,KAAK,CACnB,QACE,2EACF,MAAO,MACP,SAAU,WACV,aAAc,EAClB,CAAG,CACH,CACAlB,EAAa,iBAAiB,QAASmB,CAAe,EAEtD,SAASA,EAAgBhB,EAAO,CAC9BA,EAAM,eAAc,EAChBA,EAAM,SAAWA,EAAM,eAGV,IAAIiB,EAAe,WAAY,CAC9C,YAAa,KACjB,CAAG,CACH"}